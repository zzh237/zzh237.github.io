<aside id="sidebar" class="open">
  <div id="sidebar-left">
    <a id="sidebar-avatar" href="{{ "/" | prepend: site.baseurl }}">
      <img id="sidebar-avatar-img" alt="{{ site.tittle }}" src="{{ site.avatar | prepend: site.baseurl }}"/>
    </a>

    <div id="sidebar-social">
      <!-- <a href="{{ site.rss_url | prepend: site.baseurl }}" class="sidebar-social-icon feed"></a> -->
      <a href="mailto:{{ site.email }}" class="sidebar-social-icon email"></a>
      {% include social.html %}
    </div>

    <ul id="sidebar-tags">
      <!-- Set the "publications" filter as active by default -->
      <li class="sidebar-tag{% if page.category == 'publications' or page.url contains 'publications' %} active{% endif %}" data-filter="publications">Publications</li>
      
      <!-- List other categories as non-active -->
      {% for category in site.categories %}
        {% unless category[0] == 'publications' %}
          <li class="sidebar-tag" data-filter="{{ category[0] }}">{{ category[0] | capitalize }}</li>
        {% endunless %}
      {% endfor %}
    </ul>
  </div>

  <div id="sidebar-right">
    <div id="search-box">
      <input id="search-input" type="text" placeholder="Search" />
    </div>
    <nav id="toc">
      {% if site.filter == 'category' %}
        {% for post in site.posts %}
        <!-- {% if post.url contains '/publications/' %} -->
          <a class="toc-link" data-tags="{{ post.categories | join: ' ' }}" href="{{ post.url }}">
            {{ post.title }}
          </a>
        <!-- {% endif %} -->
        {% endfor %}
      {% elsif site.filter == 'tag' %}
        <!-- {% for post in site.posts %} -->
        {% if post.url contains '/publications/' %}
          <a class="toc-link" data-tags="{{ post.tags | join: ' ' }}" href="{{ post.url }}">
            {{ post.title }}
          </a>
        <!-- {% endif %} -->
        {% endfor %}
      {% endif %}
    </nav>
  </div>
</aside>
